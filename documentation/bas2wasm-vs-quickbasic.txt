bas2wasm vs QuickBASIC 4.5 â€” Feature Comparison
=================================================

This document tracks how the bas2wasm compiler dialect compares to
QuickBASIC 4.5. It helps identify gaps and plan future additions.


Data Types
----------

  Feature               QuickBASIC 4.5              bas2wasm
  -------               --------------              --------
  Integer               INTEGER (%), LONG (&)       i32 (32-bit signed)
  Float                 SINGLE (!), DOUBLE (#)      f32 (32-bit only, compiler-only)
  String                STRING ($)                  str ($, compiler-only)
  User-defined types    TYPE...END TYPE             No
  Type suffixes         %, &, !, #, $               $ (string), # (float variable/return)
  Type declaration      DIM AS, DEFINT/DEFSNG/etc.  Inferred from first assignment or $
  Constants             CONST                       CONST (compiler-only)


Operators
---------

  Category        QuickBASIC 4.5                  bas2wasm
  --------        --------------                  --------
  Arithmetic      + - * / \ MOD ^                 + - * / \ MOD. No ^ (use POW())
  Comparison      = <> < > <= >=                  Same
  Logical         AND OR NOT XOR EQV IMP          AND OR NOT XOR. No EQV, IMP
  String concat   +                               + (compiler-only)


Control Flow
------------

  Construct             QuickBASIC 4.5                bas2wasm
  ---------             --------------                --------
  IF single-line        IF...THEN                     IF...THEN
  IF multi-line         IF/ELSEIF/ELSE/END IF         IF/ELSE IF/ELSE/END IF
  FOR loop              FOR...NEXT, STEP, EXIT FOR    FOR...NEXT, STEP, EXIT FOR
  WHILE                 WHILE...WEND                  WHILE...WEND, EXIT WHILE
  DO/LOOP               DO WHILE/UNTIL...LOOP         All 5 variants, EXIT DO
  SELECT CASE           Yes                           Yes (CASE, CASE IS, CASE ELSE)
  GOTO / labels         Yes, line numbers and labels  No
  GOSUB/RETURN          Yes                           No
  ON...GOTO/GOSUB       Yes                           No
  EXIT SUB              Yes                           RETURN (with optional value)
  BYE                   n/a                           Exits program
  BREAK                 n/a                           Exits block / function return


Subroutines & Functions
-----------------------

  Feature         QuickBASIC 4.5                  bas2wasm
  -------         --------------                  --------
  SUB             SUB...END SUB                   SUB...END SUB
  FUNCTION        FUNCTION...END FUNCTION         Yes (alias for SUB, returns via RETURN expr)
  Parameters      By reference (default), BYVAL   By value (globals saved/restored)
  LOCAL           DIM inside sub, STATIC          LOCAL keyword
  DECLARE         Yes (forward declarations)      No (SUBs visible everywhere)
  SHARED          SHARED, COMMON                  All variables are global by default
  Recursion       Yes                             Yes
  Nesting         No nested SUBs                  No nested SUBs


Arrays
------

  Feature         QuickBASIC 4.5                  bas2wasm
  -------         --------------                  --------
  DIM             Multi-dimensional, custom bounds 1D only, 1-indexed
  REDIM           Yes (dynamic resize)            No
  UBOUND/LBOUND   Both                            UBOUND only
  OPTION BASE     0 or 1                          Always 1
  ERASE           Yes                             No
  Array ops       No built-in                     SETARRAY, SHIFTARRAY, ROTATEARRAY,
                                                  COPYARRAY, SCALELIMITARRAY,
                                                  RGBTOHSVARRAY, HSVTORGBARRAY
                                                  (interpreter only, not yet in compiler)


String Functions
----------------

  Function          QuickBASIC 4.5    bas2wasm (compiler)
  --------          --------------    -------------------
  LEN               Yes               Yes
  MID$ (read)       Yes               Yes (1-based)
  MID$ (assign)     MID$(a$,2,3)=x    Yes (compiler-only)
  LEFT$, RIGHT$     Yes               Yes
  CHR$, ASC         Yes               Yes
  STR$, VAL         Yes               Yes, plus VAL# (returns f32)
  UCASE$, LCASE$    Yes               Yes (also UPPER$, LOWER$)
  INSTR             Yes (opt start)   Yes (opt start)
  LTRIM$, RTRIM$    Separate          Yes (also combined TRIM$)
  STRING$           STRING$(n, char)  Yes
  SPACE$            SPACE$(n)         Yes
  HEX$, OCT$        Yes               Yes
  INPUT$            Yes               No
  SWAP              SWAP a$, b$       Yes (same-type variables)


I/O
---

  Feature           QuickBASIC 4.5          bas2wasm
  -------           --------------          --------
  PRINT             PRINT, ; / , fmt        > expr (one value + newline)
  Formatted output  PRINT USING             FORMAT "...", args (% int, $ str, & flt)
  String print      PRINT a$               PRINTS (interp), > a$ (compiler)
  INPUT             INPUT, LINE INPUT       No
  File I/O          OPEN, CLOSE, etc.       No (WASM runtime has file I/O)
  Screen            LOCATE, COLOR, CLS      n/a (embedded LED system)


Math Functions
--------------

  Function          QuickBASIC 4.5    bas2wasm
  --------          --------------    --------
  SIN, COS          Yes (radians)     Yes (compiler-only, f32)
  TAN               Yes               Yes (compiler-only, f32)
  ATN               ATN(x) (1-arg)    ATAN2(y, x) (2-arg, compiler-only)
  SQR               Yes               SQRT (compiler-only)
  ^ / POW           x ^ y operator    POW(x, y) function (compiler-only)
  ABS               Yes               Yes
  SGN               Yes               Yes (compiler-only, returns i32)
  INT, FIX, CINT    Type conversion   INT(), FLOAT()
  EXP, LOG          Yes               EXP, LOG, LOG2 (compiler-only, f32)
  FLOOR, CEIL       INT(x)            FLOOR, CEIL (compiler-only, f32)
  FMOD              n/a               FMOD(x, y) (compiler-only, f32)
  RND, RANDOMIZE    Yes               RANDOM(min, max)
  SIN256            n/a               Yes (integer sine, 0-255 range)
  GAMMA256          n/a               Yes (gamma correction LUT)
  SCALE             n/a               Yes (integer map/remap)
  LIMIT, LIMIT256   n/a               Yes (clamping)


Error Handling
--------------

  Feature           QuickBASIC 4.5    bas2wasm
  -------           --------------    --------
  ON ERROR GOTO     Yes               No
  RESUME            Yes               Compile-time error
  ERR, ERL          Yes               No
  ERROR             Yes               No


Data & Misc
------------

  Feature           QuickBASIC 4.5    bas2wasm
  -------           --------------    --------
  DATA/READ/RESTORE Yes               Yes (compiler-only)
  PEEK/POKE         Yes               No
  DEF FN            Yes               No


Hardware-Specific (bas2wasm only)
---------------------------------

bas2wasm includes extensive hardware builtins not found in QuickBASIC:

  - GPS: HASGPS, HASORIGIN, ORIGINDIST, ORIGINANGLE, GPSSPEED, GPSDIR,
    GPSALT, GPSLAT#, GPSLON#, DIST, ANGLE
  - IMU: HASGYRO, HASACC, HASMAG, PITCH, ROLL, YAW, ACCX, ACCY, ACCZ
  - LED: GETMAXLED, SETLEDCOL, SETLEDRGB, USEGAMMA
  - Sensors: TEMP, HUM, BRIGHT, BATPCT, BATRUNTIME, SUNAZ, SUNEL
  - System: VERSION, TIMESTAMP, WAIT, GETPARAM, WAITFOR, UPTIME
  - Date/Time: HASDATE, HASTIME, HOUR, MINUTE, SECOND, DAY, MONTH, YEAR,
    DAYOFWEEK, DAYOFYEAR, ISLEAPYEAR
  - LUT: LOADLUT, SAVELUT, LUTSIZE, LUT
  - GPIO: PIN_READ, ANALOG_READ


Summary
-------

bas2wasm is a small, purpose-built BASIC targeting an embedded LED controller.
It covers the core control flow (IF, FOR/NEXT, WHILE/WEND, SUB/FUNCTION) and
has strings and floats, with QuickBASIC-compatible syntax for operators
(\ for integer division, MOD keyword), loop closing (NEXT, WEND), comments
(apostrophe), type suffixes ($ for string, # for float), and string functions
(UCASE$, LCASE$, LTRIM$, RTRIM$). It omits QB45 features that don't apply to
its domain (graphics, file I/O, screen modes, GOTO/GOSUB, user-defined types,
error handling). In exchange it has hardware-specific builtins (GPS, IMU, LEDs,
LoRa params, LUT tables) that QB45 obviously doesn't have.

The biggest remaining gaps vs QB45 are: no EQV/IMP operators, no INPUT,
and no GOTO/GOSUB.
